version: '3.8'

services:
  pt-gen:
    build: .
    image: ghcr.io/${GITHUB_USERNAME:-user}/pt-gen-cfworker:latest
    container_name: pt-gen
    ports:
      - "8787:8787"
    environment:
      # Optional: Author name in API responses
      - AUTHOR=${AUTHOR:-Rhilip}
      
      # Optional: API key for access control
      # - APIKEY=${APIKEY}
      
      # Optional: Disable search functionality
      # - DISABLE_SEARCH=${DISABLE_SEARCH}
      
      # Optional: HTTP/HTTPS Proxy for geo-restrictions (e.g., Douban)
      # Format: http://username:password@hostname:port
      # - HTTP_PROXY=${HTTP_PROXY}
      # - HTTPS_PROXY=${HTTPS_PROXY}
      # - PROXY_URL=${PROXY_URL}
      
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:8787/"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 10s
